import{a as q,b as N,c as j,d as W,e as $,f as H,g as _}from"./chunks/chunk-UQUF4QRU.js";import{a as I,f as T}from"./chunks/chunk-W3HKVQRY.js";import{a as K}from"./chunks/chunk-2QUXJU2P.js";import"./chunks/chunk-IHRIUEAN.js";function V(i,e,t,o){function n(r){return r instanceof t?r:new t(function(a){a(r)})}return new(t||(t=Promise))(function(r,a){function p(l){try{m(o.next(l))}catch(d){a(d)}}function c(l){try{m(o.throw(l))}catch(d){a(d)}}function m(l){l.done?r(l.value):n(l.value).then(p,c)}m((o=o.apply(i,e||[])).next())})}function Q(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var D,U;function X(){return U||(U=1,D=function i(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var o,n,r;if(Array.isArray(e)){if(o=e.length,o!=t.length)return!1;for(n=o;n--!==0;)if(!i(e[n],t[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(r=Object.keys(e),o=r.length,o!==Object.keys(t).length)return!1;for(n=o;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[n]))return!1;for(n=o;n--!==0;){var a=r[n];if(!i(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}),D}var Y=X(),ee=Q(Y),z="__googleMapsScriptId",A;(function(i){i[i.INITIALIZED=0]="INITIALIZED",i[i.LOADING=1]="LOADING",i[i.SUCCESS=2]="SUCCESS",i[i.FAILURE=3]="FAILURE"})(A||(A={}));var O=class i{constructor({apiKey:e,authReferrerPolicy:t,channel:o,client:n,id:r=z,language:a,libraries:p=[],mapIds:c,nonce:m,region:l,retries:d=3,url:E="https://maps.googleapis.com/maps/api/js",version:g}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=t,this.channel=o,this.client=n,this.id=r||z,this.language=a,this.libraries=p,this.mapIds=c,this.nonce=m,this.region=l,this.retries=d,this.url=E,this.version=g,i.instance){if(!ee(this.options,i.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(i.instance.options)}`);return i.instance}i.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?A.FAILURE:this.done?A.SUCCESS:this.loading?A.LOADING:A.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){let e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,t)=>{this.loadCallback(o=>{o?t(o.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;if(document.getElementById(this.id)){this.callback();return}let o={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(o).forEach(r=>!o[r]&&delete o[r]),!((t=(e=window?.google)===null||e===void 0?void 0:e.maps)===null||t===void 0)&&t.importLibrary||(r=>{let a,p,c,m="The Google Maps JavaScript API",l="google",d="importLibrary",E="__ib__",g=document,y=window;y=y[l]||(y[l]={});let x=y.maps||(y.maps={}),w=new Set,u=new URLSearchParams,M=()=>a||(a=new Promise((h,S)=>V(this,void 0,void 0,function*(){var L;yield p=g.createElement("script"),p.id=this.id,u.set("libraries",[...w]+"");for(c in r)u.set(c.replace(/[A-Z]/g,k=>"_"+k[0].toLowerCase()),r[c]);u.set("callback",l+".maps."+E),p.src=this.url+"?"+u,x[E]=h,p.onerror=()=>a=S(Error(m+" could not load.")),p.nonce=this.nonce||((L=g.querySelector("script[nonce]"))===null||L===void 0?void 0:L.nonce)||"",g.head.append(p)})));x[d]?console.warn(m+" only loads once. Ignoring:",r):x[d]=(h,...S)=>w.add(h)&&M().then(()=>x[d](h,...S))})(o);let n=this.libraries.map(r=>this.importLibrary(r));n.length||n.push(this.importLibrary("core")),Promise.all(n).then(()=>this.callback(),r=>{let a=new ErrorEvent("error",{error:r});this.loadErrorCallback(a)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){let t=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${t} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},t)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}};function P(i,e,{signal:t,edges:o}={}){let n,r=null,a=o!=null&&o.includes("leading"),p=o==null||o.includes("trailing"),c=()=>{r!==null&&(i.apply(n,r),n=void 0,r=null)},m=()=>{p&&c(),g()},l=null,d=()=>{l!=null&&clearTimeout(l),l=setTimeout(()=>{l=null,m()},e)},E=()=>{l!==null&&(clearTimeout(l),l=null)},g=()=>{E(),n=void 0,r=null},y=()=>{c()},x=function(...w){if(t?.aborted)return;n=this,r=w;let u=l==null;d(),a&&u&&c()};return x.schedule=d,x.cancel=g,x.flush=y,t?.addEventListener("abort",g,{once:!0}),x}var te=()=>{let i=import.meta.url;return K({selector:`script[src="${i}"]`})},J=te();if(!J)throw new Error("Search Address script element was not found!");var G=J.getAttribute("data-places-key");if(!G)throw new Error("Places API key was not found in the script element! Please set data-places-key attribute in the script.");var re=new O({apiKey:G,version:"weekly"}),oe=async()=>{let{AutocompleteSuggestion:i}=await re.importLibrary("places"),e=new Map;return{fetchAddresses:P(async(n,r)=>{let a=e.get(n);if(a!==void 0){r(a);return}try{let p={input:n,includedRegionCodes:["ae"]},m=(await i.fetchAutocompleteSuggestions(p)).suggestions.filter(l=>l.placePrediction!=null).map(l=>l.placePrediction.text.text);e.set(n,m),r(m)}catch(p){console.error("Something went wrong with places api:",p);let c=[];e.set(n,c),r(c)}},100)}},Z=oe();var ie=()=>{let i=Array.from(document.querySelectorAll("[data-address-input]"));if(i.length===0)throw new Error("Address input element([data-address-input]) was not found!");for(let e of i){let t=I(e.closest("[data-address-container]")?.querySelector("[data-address-result]"),"Address result container([data-address-result]) was not found!"),o=I(t?.querySelector("[data-address-list]"),"Address result list([data-address-list]) was not found!"),n=I(o?.querySelector("[data-address-item]"),"Address result item([data-address-item]) was not found!"),r=document.createDocumentFragment(),a=[],p=0,c=void 0,m=!1,l=o.id||"address-result-options",d,E;r.appendChild(t),t.dataset.initialized="";let g=()=>{e.type="search",e.ariaAutoComplete="both",e.setAttribute("autocomplete","off"),e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck","false"),e.setAttribute("aria-controls",l),o.role="listbox",o.id=l},y=()=>{H(e,t,{placement:"bottom-start",middleware:[N(),W(),j(),$({apply:({rects:s})=>{T(t,{width:`${s.reference.width}px`})}})]}).then(({x:s,y:f})=>{T(t,{left:`${s}px`,top:`${f}px`})})},x=s=>{a=s},w=s=>{let f=a[p],v=a[s];f&&(f.classList.remove("focused"),f.ariaSelected="false"),v&&(v.classList.add("focused"),v.ariaSelected="true",e.setAttribute("aria-activedescendant",v.id)),p=s},u,M=s=>{let f=a[s],b=I(f?.querySelector("p"),"List item paragraph element was not found!").textContent?.trim();if(!b)throw new Error("Result item is invalid");e.value=b,e.focus()},h=()=>{r.appendChild(t),e.removeAttribute("aria-activedescendant"),u!==void 0&&document.removeEventListener("keydown",u),m=!1,d?.(),E?.()},S=()=>{for(let s=0;s<a.length;s++){let f=a[s];f.role="option",f.ariaSelected="false",f.id=`address-suggestion-${s}`,f.addEventListener("mouseenter",()=>{w(s)}),f.addEventListener("click",()=>{M(s),h()})}u!==void 0&&document.removeEventListener("keydown",u),u=s=>{s.key==="Enter"&&(s.preventDefault(),e.blur(),M(p),e.focus(),h()),s.key==="ArrowDown"&&(s.preventDefault(),w(p>=a.length-1?0:p+1)),s.key==="ArrowUp"&&(s.preventDefault(),w(p<=0?a.length-1:p-1)),s.key==="Escape"&&(s.preventDefault(),h())},document.addEventListener("keydown",u)},L=()=>{document.body.appendChild(t),y(),m=!0,d=q(e,t,y),E=_(t,{onPointerDownOutside:h,onInteractOutside:h,onFocusOutside:h})},k=s=>{if(o.innerHTML="",w(0),s.length===0){x([]);return}let f=[],v=document.createDocumentFragment();for(let b=0;b<s.length;b++){let R=n.cloneNode(!0),C=I(R.querySelector("p"),"List item paragraph element was not found!");C.textContent=s[b],C.dataset.index=b.toString(),b===0&&R.classList.add("focused"),v.appendChild(R),f.push(R)}o.appendChild(v),x(f),S()};Z.then(({fetchAddresses:s})=>{let f;e.addEventListener("input",v=>{let C=v.target.value,B=Date.now();if(f=B,C===""){k([]),h();return}s(C,F=>{if(!(f!==void 0&&f!==B)){if(k(F),F.length===0){h();return}L()}})})}),g(),k([])}};ie();
