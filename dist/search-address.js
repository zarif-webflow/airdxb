"use strict";(()=>{var H=Object.create;var j=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var K=Object.getPrototypeOf,q=Object.prototype.hasOwnProperty;var G=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var B=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of U(e))!q.call(t,n)&&n!==r&&j(t,n,{get:()=>e[n],enumerable:!(s=N(e,n))||s.enumerable});return t};var Z=(t,e,r)=>(r=t!=null?H(K(t)):{},B(e||!t||!t.__esModule?j(r,"default",{value:t,enumerable:!0}):r,t));var D=G((Ee,$)=>{var X="Expected a function",C=NaN,z="[object Symbol]",Y=/^\s+|\s+$/g,ee=/^[-+]0x[0-9a-f]+$/i,te=/^0b[01]+$/i,re=/^0o[0-7]+$/i,ne=parseInt,ie=typeof global=="object"&&global&&global.Object===Object&&global,se=typeof self=="object"&&self&&self.Object===Object&&self,oe=ie||se||Function("return this")(),ae=Object.prototype,le=ae.toString,ce=Math.max,de=Math.min,O=function(){return oe.Date.now()};function ue(t,e,r){var s,n,i,l,a,d,u=0,f=!1,h=!1,w=!0;if(typeof t!="function")throw new TypeError(X);e=P(e)||0,M(r)&&(f=!!r.leading,h="maxWait"in r,i=h?ce(P(r.maxWait)||0,e):i,w="trailing"in r?!!r.trailing:w);function v(c){var S=s,A=n;return s=n=void 0,u=c,l=t.apply(A,S),l}function b(c){return u=c,a=setTimeout(m,e),f?v(c):l}function o(c){var S=c-d,A=c-u,R=e-S;return h?de(R,i-A):R}function p(c){var S=c-d,A=c-u;return d===void 0||S>=e||S<0||h&&A>=i}function m(){var c=O();if(p(c))return g(c);a=setTimeout(m,o(c))}function g(c){return a=void 0,w&&s?v(c):(s=n=void 0,l)}function y(){a!==void 0&&clearTimeout(a),u=0,s=d=n=a=void 0}function E(){return a===void 0?l:g(O())}function I(){var c=O(),S=p(c);if(s=arguments,n=this,d=c,S){if(a===void 0)return b(d);if(h)return a=setTimeout(m,e),v(d)}return a===void 0&&(a=setTimeout(m,e)),l}return I.cancel=y,I.flush=E,I}function M(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function fe(t){return!!t&&typeof t=="object"}function he(t){return typeof t=="symbol"||fe(t)&&le.call(t)==z}function P(t){if(typeof t=="number")return t;if(he(t))return C;if(M(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=M(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Y,"");var r=te.test(t);return r||re.test(t)?ne(t.slice(2),r?2:8):ee.test(t)?C:+t}$.exports=ue});function V(t,e,r,s){function n(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function a(f){try{u(s.next(f))}catch(h){l(h)}}function d(f){try{u(s.throw(f))}catch(h){l(h)}}function u(f){f.done?i(f.value):n(f.value).then(a,d)}u((s=s.apply(t,e||[])).next())})}function W(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var J=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var s,n,i;if(Array.isArray(e)){if(s=e.length,s!=r.length)return!1;for(n=s;n--!==0;)if(!t(e[n],r[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),s=i.length,s!==Object.keys(r).length)return!1;for(n=s;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[n]))return!1;for(n=s;n--!==0;){var l=i[n];if(!t(e[l],r[l]))return!1}return!0}return e!==e&&r!==r},Q=W(J),x="__googleMapsScriptId",T;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(T||(T={}));var k=class t{constructor({apiKey:e,authReferrerPolicy:r,channel:s,client:n,id:i=x,language:l,libraries:a=[],mapIds:d,nonce:u,region:f,retries:h=3,url:w="https://maps.googleapis.com/maps/api/js",version:v}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=r,this.channel=s,this.client=n,this.id=i||x,this.language=l,this.libraries=a,this.mapIds=d,this.nonce=u,this.region=f,this.retries=h,this.url=w,this.version=v,t.instance){if(!Q(this.options,t.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(t.instance.options)}`);return t.instance}t.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?T.FAILURE:this.done?T.SUCCESS:this.loading?T.LOADING:T.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){let e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,r)=>{this.loadCallback(s=>{s?r(s.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,r;if(document.getElementById(this.id)){this.callback();return}let s={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(s).forEach(i=>!s[i]&&delete s[i]),!((r=(e=window?.google)===null||e===void 0?void 0:e.maps)===null||r===void 0)&&r.importLibrary||(i=>{let l,a,d,u="The Google Maps JavaScript API",f="google",h="importLibrary",w="__ib__",v=document,b=window;b=b[f]||(b[f]={});let o=b.maps||(b.maps={}),p=new Set,m=new URLSearchParams,g=()=>l||(l=new Promise((y,E)=>V(this,void 0,void 0,function*(){var I;yield a=v.createElement("script"),a.id=this.id,m.set("libraries",[...p]+"");for(d in i)m.set(d.replace(/[A-Z]/g,c=>"_"+c[0].toLowerCase()),i[d]);m.set("callback",f+".maps."+w),a.src=this.url+"?"+m,o[w]=y,a.onerror=()=>l=E(Error(u+" could not load.")),a.nonce=this.nonce||((I=v.querySelector("script[nonce]"))===null||I===void 0?void 0:I.nonce)||"",v.head.append(a)})));o[h]?console.warn(u+" only loads once. Ignoring:",i):o[h]=(y,...E)=>p.add(y)&&g().then(()=>o[h](y,...E))})(s);let n=this.libraries.map(i=>this.importLibrary(i));n.length||n.push(this.importLibrary("core")),Promise.all(n).then(()=>this.callback(),i=>{let l=new ErrorEvent("error",{error:i});this.loadErrorCallback(l)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){let r=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}};var F=Z(D(),1);function L(t,e){if(t==null)throw new Error(e??"Value was not provided!");return t}var pe=L(document.body.dataset.placesKey,"places api key was not found!"),me=new k({apiKey:pe,version:"weekly"}),ge=async()=>{console.log(`getFetchAddressesFunc started at ${new Date().getTime()}`);let t=new(await me.importLibrary("places")).AutocompleteService,e=new Map,s=(0,F.default)((n,i)=>{let l=e.get(n);if(l!==void 0){i(l);return}let a=function(d,u){let f=[];u!==google.maps.places.PlacesServiceStatus.OK&&u!=="ZERO_RESULTS"&&console.error(`Something went wrong with places api. Status ${u}`),d!==null&&(f=d.map(h=>h.description)),e.set(n,f),i(f)};t.getPlacePredictions({input:n,componentRestrictions:{country:"ae"}},a)},100);return console.log(`getFetchAddressesFunc returned at ${new Date().getTime()}`),{fetchAddresses:s}},_=ge();var ye=()=>{console.log(`initSeachAddress started at ${new Date().getTime()}`);let t=L(document.querySelector("[data-address-input]"),"Address input element([data-address-input]) was not found!"),e=L(t.closest("[data-address-container]")?.querySelector("[data-address-result]"),"Address result container([data-address-result]) was not found!"),r=L(e?.querySelector("[data-address-list]"),"Address result list([data-address-list]) was not found!"),s=L(r?.querySelector("[data-address-item]"),"Address result item([data-address-item]) was not found!"),n=[],i=0,l=o=>{n=o},a=o=>{let p=n[i],m=n[o];p?.classList.remove("focused"),m?.classList.add("focused"),i=o},d,u,f=o=>{let p=n[o],g=L(p?.querySelector("p"),"List item paragraph element was not found!").textContent?.trim();if(!g)throw new Error("Result item is invalid");t.value=g,t.focus()},h=()=>{e.classList.add("is--hidden")},w=()=>{for(let o=0;o<n.length;o++){let p=n[o];p.addEventListener("mouseenter",()=>{a(o)}),p.addEventListener("click",()=>{f(o),h()})}u!==void 0&&document.body.removeEventListener("mousedown",u),u=o=>{o.target.closest("[data-address-container]")||h()},document.body.addEventListener("mousedown",u),d!==void 0&&document.removeEventListener("keydown",d),d=o=>{o.key==="Enter"&&(o.preventDefault(),t.blur(),f(i),t.focus(),h()),o.key==="ArrowDown"&&(t.blur(),a(i>=n.length-1?0:i+1)),o.key==="ArrowUp"&&(t.blur(),a(i<=0?n.length-1:i-1))},document.addEventListener("keydown",d)},v=()=>{e.classList.remove("is--hidden")},b=o=>{if(r.innerHTML="",a(0),o.length===0){l([]);return}let p=[],m=document.createDocumentFragment();for(let g=0;g<o.length;g++){let y=s.cloneNode(!0),E=L(y.querySelector("p"),"List item paragraph element was not found!");E.textContent=o[g],E.dataset.index=g.toString(),g===0&&y.classList.add("focused"),m.appendChild(y),p.push(y)}r.appendChild(m),l(p),w()};_.then(({fetchAddresses:o})=>{let p;t.addEventListener("input",m=>{let E=m.target.value,I=Date.now();if(p=I,E===""){b([]),h();return}o(E,c=>{if(!(p!==void 0&&p!==I)){if(b(c),c.length===0){h();return}v()}})})}),b([]),console.log(`initSearchAddresses returned at ${new Date().getTime()}`)};ye();})();
