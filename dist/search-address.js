"use strict";(()=>{var H=Object.create;var j=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var K=Object.getPrototypeOf,q=Object.prototype.hasOwnProperty;var G=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var B=(t,e,n,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of U(e))!q.call(t,r)&&r!==n&&j(t,r,{get:()=>e[r],enumerable:!(s=N(e,r))||s.enumerable});return t};var W=(t,e,n)=>(n=t!=null?H(K(t)):{},B(e||!t||!t.__esModule?j(n,"default",{value:t,enumerable:!0}):n,t));var _=G((Ee,D)=>{var X="Expected a function",P=NaN,z="[object Symbol]",Y=/^\s+|\s+$/g,ee=/^[-+]0x[0-9a-f]+$/i,te=/^0b[01]+$/i,ne=/^0o[0-7]+$/i,re=parseInt,ie=typeof global=="object"&&global&&global.Object===Object&&global,se=typeof self=="object"&&self&&self.Object===Object&&self,oe=ie||se||Function("return this")(),ae=Object.prototype,le=ae.toString,ce=Math.max,de=Math.min,O=function(){return oe.Date.now()};function ue(t,e,n){var s,r,i,l,a,c,d=0,f=!1,h=!1,I=!0;if(typeof t!="function")throw new TypeError(X);e=x(e)||0,R(n)&&(f=!!n.leading,h="maxWait"in n,i=h?ce(x(n.maxWait)||0,e):i,I="trailing"in n?!!n.trailing:I);function v(u){var S=s,k=r;return s=r=void 0,d=u,l=t.apply(k,S),l}function b(u){return d=u,a=setTimeout(m,e),f?v(u):l}function o(u){var S=u-c,k=u-d,M=e-S;return h?de(M,i-k):M}function p(u){var S=u-c,k=u-d;return c===void 0||S>=e||S<0||h&&k>=i}function m(){var u=O();if(p(u))return g(u);a=setTimeout(m,o(u))}function g(u){return a=void 0,I&&s?v(u):(s=r=void 0,l)}function y(){a!==void 0&&clearTimeout(a),d=0,s=c=r=a=void 0}function E(){return a===void 0?l:g(O())}function w(){var u=O(),S=p(u);if(s=arguments,r=this,c=u,S){if(a===void 0)return b(c);if(h)return a=setTimeout(m,e),v(c)}return a===void 0&&(a=setTimeout(m,e)),l}return w.cancel=y,w.flush=E,w}function R(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function fe(t){return!!t&&typeof t=="object"}function he(t){return typeof t=="symbol"||fe(t)&&le.call(t)==z}function x(t){if(typeof t=="number")return t;if(he(t))return P;if(R(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=R(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Y,"");var n=te.test(t);return n||ne.test(t)?re(t.slice(2),n?2:8):ee.test(t)?P:+t}D.exports=ue});function Z(t,e,n,s){function r(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function a(f){try{d(s.next(f))}catch(h){l(h)}}function c(f){try{d(s.throw(f))}catch(h){l(h)}}function d(f){f.done?i(f.value):r(f.value).then(a,c)}d((s=s.apply(t,e||[])).next())})}function V(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var J=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var s,r,i;if(Array.isArray(e)){if(s=e.length,s!=n.length)return!1;for(r=s;r--!==0;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),s=i.length,s!==Object.keys(n).length)return!1;for(r=s;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[r]))return!1;for(r=s;r--!==0;){var l=i[r];if(!t(e[l],n[l]))return!1}return!0}return e!==e&&n!==n},Q=V(J),C="__googleMapsScriptId",T;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(T||(T={}));var A=class t{constructor({apiKey:e,authReferrerPolicy:n,channel:s,client:r,id:i=C,language:l,libraries:a=[],mapIds:c,nonce:d,region:f,retries:h=3,url:I="https://maps.googleapis.com/maps/api/js",version:v}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=n,this.channel=s,this.client=r,this.id=i||C,this.language=l,this.libraries=a,this.mapIds=c,this.nonce=d,this.region=f,this.retries=h,this.url=I,this.version=v,t.instance){if(!Q(this.options,t.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(t.instance.options)}`);return t.instance}t.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?T.FAILURE:this.done?T.SUCCESS:this.loading?T.LOADING:T.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){let e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,n)=>{this.loadCallback(s=>{s?n(s.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,n;if(document.getElementById(this.id)){this.callback();return}let s={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(s).forEach(i=>!s[i]&&delete s[i]),!((n=(e=window?.google)===null||e===void 0?void 0:e.maps)===null||n===void 0)&&n.importLibrary||(i=>{let l,a,c,d="The Google Maps JavaScript API",f="google",h="importLibrary",I="__ib__",v=document,b=window;b=b[f]||(b[f]={});let o=b.maps||(b.maps={}),p=new Set,m=new URLSearchParams,g=()=>l||(l=new Promise((y,E)=>Z(this,void 0,void 0,function*(){var w;yield a=v.createElement("script"),a.id=this.id,m.set("libraries",[...p]+"");for(c in i)m.set(c.replace(/[A-Z]/g,u=>"_"+u[0].toLowerCase()),i[c]);m.set("callback",f+".maps."+I),a.src=this.url+"?"+m,o[I]=y,a.onerror=()=>l=E(Error(d+" could not load.")),a.nonce=this.nonce||((w=v.querySelector("script[nonce]"))===null||w===void 0?void 0:w.nonce)||"",v.head.append(a)})));o[h]?console.warn(d+" only loads once. Ignoring:",i):o[h]=(y,...E)=>p.add(y)&&g().then(()=>o[h](y,...E))})(s);let r=this.libraries.map(i=>this.importLibrary(i));r.length||r.push(this.importLibrary("core")),Promise.all(r).then(()=>this.callback(),i=>{let l=new ErrorEvent("error",{error:i});this.loadErrorCallback(l)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){let n=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${n} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},n)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}};var $=W(_(),1);function L(t,e){if(t==null)throw new Error(e??"Value was not provided!");return t}var pe=L(document.body.dataset.placesKey,"places api key was not found!"),me=new A({apiKey:pe,version:"weekly"}),ge=async()=>{let t=new(await me.importLibrary("places")).AutocompleteService,e=new Map;return{fetchAddresses:(0,$.default)((r,i)=>{let l=e.get(r);if(l!==void 0){i(l);return}let a=function(c,d){let f=[];d!==google.maps.places.PlacesServiceStatus.OK&&d!=="ZERO_RESULTS"&&console.error(`Something went wrong with places api. Status ${d}`),c!==null&&(f=c.map(h=>h.description)),e.set(r,f),i(f)};t.getPlacePredictions({input:r,componentRestrictions:{country:"ae"}},a)},100)}},F=ge();var ye=()=>{let t=L(document.querySelector("[data-address-input]"),"Address input element([data-address-input]) was not found!"),e=L(t.closest("[data-address-container]")?.querySelector("[data-address-result]"),"Address result container([data-address-result]) was not found!"),n=L(e?.querySelector("[data-address-list]"),"Address result list([data-address-list]) was not found!"),s=L(n?.querySelector("[data-address-item]"),"Address result item([data-address-item]) was not found!"),r=[],i=0,l=o=>{r=o},a=o=>{let p=r[i],m=r[o];p?.classList.remove("focused"),m?.classList.add("focused"),i=o},c,d,f=o=>{let p=r[o],g=L(p?.querySelector("p"),"List item paragraph element was not found!").textContent?.trim();if(!g)throw new Error("Result item is invalid");t.value=g,t.focus()},h=()=>{e.classList.add("is--hidden"),d!==void 0&&document.body.removeEventListener("mousedown",d),c!==void 0&&document.removeEventListener("keydown",c)},I=()=>{for(let o=0;o<r.length;o++){let p=r[o];p.addEventListener("mouseenter",()=>{a(o)}),p.addEventListener("click",()=>{f(o),h()})}d!==void 0&&document.body.removeEventListener("mousedown",d),d=o=>{o.target.closest("[data-address-container]")||h()},document.body.addEventListener("mousedown",d),c!==void 0&&document.removeEventListener("keydown",c),c=o=>{o.key==="Enter"&&(o.preventDefault(),t.blur(),f(i),t.focus(),h()),o.key==="ArrowDown"&&(o.preventDefault(),a(i>=r.length-1?0:i+1)),o.key==="ArrowUp"&&(o.preventDefault(),a(i<=0?r.length-1:i-1))},document.addEventListener("keydown",c)},v=()=>{e.classList.remove("is--hidden")},b=o=>{if(n.innerHTML="",a(0),o.length===0){l([]);return}let p=[],m=document.createDocumentFragment();for(let g=0;g<o.length;g++){let y=s.cloneNode(!0),E=L(y.querySelector("p"),"List item paragraph element was not found!");E.textContent=o[g],E.dataset.index=g.toString(),g===0&&y.classList.add("focused"),m.appendChild(y),p.push(y)}n.appendChild(m),l(p),I()};F.then(({fetchAddresses:o})=>{let p;t.addEventListener("input",m=>{let E=m.target.value,w=Date.now();if(p=w,E===""){b([]),h();return}o(E,u=>{if(!(p!==void 0&&p!==w)){if(b(u),u.length===0){h();return}v()}})})}),b([])};ye();})();
