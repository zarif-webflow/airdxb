import{C as u}from"./chunks/chartjs.js";import{b as m,p as b}from"./chunks/util.js";const g="#000000",v=({canvasElement:o,data:e,xTickCallback:r,yTickCallback:l,tooltipLabelCallback:i,onChartInit:a})=>{const n=window.getComputedStyle(o),{fontFamily:t,fontWeight:p,fontSize:s}=n,C=window.getComputedStyle(document.documentElement).getPropertyValue("--bar-fill")||g,h=window.getComputedStyle(document.documentElement).getPropertyValue("--bar-grid")||g,k=window.getComputedStyle(document.documentElement).getPropertyValue("--bar-border")||g,y=window.getComputedStyle(document.documentElement).getPropertyValue("--bar-radius"),S=y!==""?Number.parseFloat(y.replace("px","")):16,c=m(o.closest("[data-bar-parent]"),"Canvas parent element([data-bar-parent]) was not found!"),x=b(c?.dataset.animationDuration,1)*1e3,E=b(c?.dataset.animationDelay,0)*1e3,q=b(c?.dataset.viewportThreshold,.8),F=b(c?.dataset.viewportMargin,0),L={data:{datasets:[{data:e.map(d=>d.value),backgroundColor:C,borderRadius:S}],labels:e.map(d=>d.label)},type:"bar",options:{indexAxis:"y",responsive:!0,animation:{duration:x},maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{...i&&{label:i}},padding:9,titleMarginBottom:8,titleAlign:"left",footerMarginTop:0,displayColors:!1}},scales:{x:{ticks:{...r&&{callback:r}},grid:{color:h,tickWidth:0},border:{width:0,display:!1}},y:{ticks:{...l&&{callback:l}},grid:{tickWidth:0},border:{color:k}}}}},f=new IntersectionObserver(d=>{for(const $ of d){if(!$.isIntersecting)return;setTimeout(()=>{u.defaults.font.family=t,u.defaults.font.size=Number.parseFloat(s.replace("px","")),u.defaults.font.weight=Number.parseFloat(p),document.fonts.ready.then(()=>{const N=new u(o,L);a?.(N)})},E),f.unobserve(c)}},{root:null,threshold:q,rootMargin:`${F}px`});f.observe(c)},w=({type:o})=>{const e=o==="value"?"[data-value-bar-parent]":"[data-volume-bar-parent]",r=m(document.querySelector(e),`${e} was not found!`),l=Array.from(r.querySelectorAll("[data-cms-item]"));if(l.length===0)throw new Error(`${e} [data-cms-item] were not found!`);const i=[];for(const a of l){const n=a.querySelector("[data-label]")?.textContent,t=a.querySelector("[data-value]")?.textContent,p=a.querySelector("[data-unit]")?.textContent||void 0;if(!n||!t)continue;const s=Number.parseFloat(t);Number.isNaN(s)||i.push({label:n,value:s,unit:p})}return r.remove(),i},T=()=>{const o=w({type:"value"}),e=w({type:"volume"}),r=o[0]?.unit;e[0]?.unit;const l=m(document.querySelector("[data-volume-barchart]"),"Canvas element([data-volume-barchart]) was not found!"),i=m(document.querySelector("[data-value-barchart]"),"Canvas element([data-value-barchart]) was not found!"),a=document.querySelector('[data-bar-trigger="volume"]'),n=document.querySelector('[data-bar-trigger="value"]');a||console.error(`[data-bar-trigger="volume"] wasn't found!`),n||console.error(`[data-bar-trigger="value"] wasn't found!`),v({canvasElement:l,data:e,xTickCallback:t=>t===0?"0.0":typeof t=="number"?`${(t/1e3).toFixed(1)}K`:t.toString(),onChartInit:t=>{a?.addEventListener("click",()=>{a.classList.contains("w--current")||(t.reset(),t.update())})}}),v({canvasElement:i,data:o,xTickCallback:t=>t===0?"0.0":typeof t=="number"?`${t.toLocaleString()}${r}`:t.toString(),tooltipLabelCallback:t=>t.raw===0?"0.0":typeof t.raw=="number"?`${t.raw.toLocaleString()}${r}`:t.toString(),onChartInit:t=>{n?.addEventListener("click",()=>{n.classList.contains("w--current")||(t.reset(),t.update())})}})};T();
