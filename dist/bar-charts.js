import{a as d}from"./chunks/chunk-KWUUVEZ6.js";import{a as u,g as m}from"./chunks/chunk-W3HKVQRY.js";import"./chunks/chunk-IHRIUEAN.js";var f="#000000",g=({canvasElement:a,data:r,xTickCallback:n,yTickCallback:l,tooltipLabelCallback:i,onChartInit:e})=>{let o=window.getComputedStyle(a),{fontFamily:t,fontWeight:p,fontSize:b}=o,h=window.getComputedStyle(document.documentElement).getPropertyValue("--bar-fill")||f,w=window.getComputedStyle(document.documentElement).getPropertyValue("--bar-grid")||f,S=window.getComputedStyle(document.documentElement).getPropertyValue("--bar-border")||f,v=window.getComputedStyle(document.documentElement).getPropertyValue("--bar-radius"),T=v!==""?Number.parseFloat(v.replace("px","")):16,s=u(a.closest("[data-bar-parent]"),"Canvas parent element([data-bar-parent]) was not found!"),E=m(s?.dataset.animationDuration,1)*1e3,L=m(s?.dataset.animationDelay,0)*1e3,k=m(s?.dataset.viewportThreshold,.8),M=m(s?.dataset.viewportMargin,0),B={data:{datasets:[{data:r.map(c=>c.value),backgroundColor:h,borderRadius:T}],labels:r.map(c=>c.label)},type:"bar",options:{indexAxis:"y",responsive:!0,animation:{duration:E},maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{...i&&{label:i}},padding:9,titleMarginBottom:8,titleAlign:"left",footerMarginTop:0,displayColors:!1}},scales:{x:{ticks:{...n&&{callback:n}},grid:{color:w,tickWidth:0},border:{width:0,display:!1}},y:{ticks:{...l&&{callback:l}},grid:{tickWidth:0},border:{color:S}}}}},C=new IntersectionObserver(c=>{for(let H of c){if(!H.isIntersecting)return;setTimeout(()=>{d.defaults.font.family=t,d.defaults.font.size=Number.parseFloat(b.replace("px","")),d.defaults.font.weight=Number.parseFloat(p),document.fonts.ready.then(()=>{let D=new d(a,B);e?.(D)})},L),C.unobserve(s)}},{root:null,threshold:k,rootMargin:`${M}px`});C.observe(s)};var y=({type:a})=>{let r=a==="value"?"[data-value-bar-parent]":"[data-volume-bar-parent]",n=u(document.querySelector(r),`${r} was not found!`),l=Array.from(n.querySelectorAll("[data-cms-item]"));if(l.length===0)throw new Error(`${r} [data-cms-item] were not found!`);let i=[];for(let e of l){let o=e.querySelector("[data-label]")?.textContent,t=e.querySelector("[data-value]")?.textContent,p=e.querySelector("[data-unit]")?.textContent||void 0;if(!o||!t)continue;let b=Number.parseFloat(t);Number.isNaN(b)||i.push({label:o,value:b,unit:p})}return n.remove(),i},F=()=>{let a=y({type:"value"}),r=y({type:"volume"}),n=a[0]?.unit,l=u(document.querySelector("[data-volume-barchart]"),"Canvas element([data-volume-barchart]) was not found!"),i=u(document.querySelector("[data-value-barchart]"),"Canvas element([data-value-barchart]) was not found!"),e=document.querySelector('[data-bar-trigger="volume"]'),o=document.querySelector('[data-bar-trigger="value"]');e||console.error(`[data-bar-trigger="volume"] wasn't found!`),o||console.error(`[data-bar-trigger="value"] wasn't found!`),g({canvasElement:l,data:r,xTickCallback:t=>t===0?"0.0":typeof t=="number"?`${(t/1e3).toFixed(1)}K`:t.toString(),onChartInit:t=>{e?.addEventListener("click",()=>{e.classList.contains("w--current")||(t.reset(),t.update())})}}),g({canvasElement:i,data:a,xTickCallback:t=>t===0?"0.0":typeof t=="number"?`${t.toLocaleString()}${n}`:t.toString(),tooltipLabelCallback:t=>t.raw===0?"0.0":typeof t.raw=="number"?`${t.raw.toLocaleString()}${n}`:t.toString(),onChartInit:t=>{o?.addEventListener("click",()=>{o.classList.contains("w--current")||(t.reset(),t.update())})}})};F();
