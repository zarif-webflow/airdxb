import{a as H,b as $,c as M,d as q,e as N,f as T,g as U}from"./chunks/chunk-UQUF4QRU.js";import{d as f,e as F,f as m}from"./chunks/chunk-W3HKVQRY.js";import"./chunks/chunk-IHRIUEAN.js";var z=new Set,B=()=>{for(;;){let a=Math.random().toString(36).substring(2,8);if(!z.has(a))return a}},P=a=>{let O=document.createDocumentFragment(),r=f("[data-st-trigger]",a),c=f("[data-st-value]",r),i=f("[data-st-content]",a),y=f("[data-st-viewport]",a),g=!1,b,w,d,h,C,I,S=(()=>{let e=`st--${B()}`,t=a.id;t===""&&(t=e,a.id=t);let n={id:e,content:`${e}--content`,trigger:`${e}--trigger`,viewport:`${e}--viewport`,rootElement:t};return i.id=n.content,r.id=n.trigger,y.id=n.viewport,n})(),l=(()=>{let e=!1,t=[],n=F("[data-st-option]",a);for(let o=0;o<n.length;o++){let s=n[o],u=s.getAttribute("data-value")??s.textContent?.trim();if(u===void 0)throw new Error("Option element must have a value or a text content!");s.setAttribute("data-value",u),s.setAttribute("id",`${S.id}--option-${o}`);let A=s.hasAttribute("selected")&&!e;t.push({element:s,value:u}),A&&(e=!0,b=o,c.textContent=s.textContent?.trim()||null,c.setAttribute("data-selected",""))}return t})(),E=(()=>{let e=document.createElement("select"),t=a.getAttribute("data-name");t&&(e.name=t);let n=a.getAttribute("data-aria");(n==="inert"||!a.hasAttribute("data-aria"))&&e.setAttribute("inert",""),n==="hidden"&&e.setAttribute("aria-hidden","true"),e.tabIndex=-1,a.hasAttribute("data-required")&&(e.required=!0);let o=document.createDocumentFragment(),s=!1;for(let u=0;u<l.length;u++){let{value:A}=l[u],x=document.createElement("option");x.value=A,x.textContent=A,u===b&&!s&&(x.setAttribute("selected",""),s=!0),o.appendChild(x)}return e.appendChild(o),m(a,{position:"relative"}),m(e,{width:"0px",height:"0px",padding:"0px",margin:"0px",overflow:"hidden",position:"absolute",bottom:"0px",left:"50%",transform:"translateX(-50%)",clip:"rect(0px, 0px, 0px, 0px)","white-space":"nowrap","overflow-wrap":"normal"}),s||(e.value=""),a.appendChild(e),e})(),L=()=>{if(d!==void 0){let e=l[d];e.element.classList.remove("focused","hovered"),e.element.removeAttribute("data-focused"),e.element.removeAttribute("data-hovered"),e.element.blur()}d=void 0,i.removeAttribute("aria-activedescendant")},v=(e,t="hover")=>{let n=l[e].element;L(),t==="focus"&&(n.classList.add("focused"),n.setAttribute("data-focused","true"),n.focus()),t==="hover"&&(n.classList.add("hovered"),n.setAttribute("data-hovered","true"));let o=n.getAttribute("id");o!==null&&i.setAttribute("aria-activedescendant",o),d=e},K=()=>{for(let{value:e,element:t}of l){if(c.removeAttribute("data-selected"),e===""){c.textContent=t.textContent,t.dataset.selected="false",t.ariaSelected="false";continue}t.dataset.selected="false",t.ariaSelected="false",t.classList.remove("selected")}E.value=""},k=()=>{T(r,i,{placement:"bottom-start",middleware:[$(),q(),M(),N({apply:({rects:e})=>{m(i,{"min-width":`${e.reference.width}px`})}})]}).then(({x:e,y:t})=>{m(i,{left:`${e}px`,top:`${t}px`})})},p=()=>{g&&(O.appendChild(i),g=!1,r.ariaExpanded="false",C?.(),I?.(),h&&document.removeEventListener("keydown",h))},V=()=>{g||(document.body.appendChild(i),g=!0,r.ariaExpanded="true",w!==void 0&&v(w),k(),C=H(r,i,k),I=U(i,{onPointerDownOutside:p,onInteractOutside:p,onFocusOutside:p,exclude:e=>r.isSameNode(e)||r.contains(e)}),h=e=>{if(e.key==="Enter"||e.key===" "){if(e.preventDefault(),d===void 0)return;D(d),p()}e.key==="ArrowDown"&&(e.preventDefault(),v(d===void 0||d>=l.length-1?0:d+1,"focus")),e.key==="ArrowUp"&&(e.preventDefault(),v(d===void 0||d<=0?l.length-1:d-1,"focus")),e.key==="Escape"&&(e.preventDefault(),p())},document.addEventListener("keydown",h))},D=e=>{let t=l[e].element;K(),w=e,v(e,"hover");let n=t.getAttribute("data-value");if(n===null)throw new Error("Option element must have a value!");n?(E.value=n,c.setAttribute("data-selected","")):(E.removeAttribute("value"),c.removeAttribute("data-selected")),c.textContent=t.textContent?.trim()||null,t.ariaSelected="true",t.dataset.selected="true",t.classList.add("selected"),p()};(()=>{r.setAttribute("type","button"),r.tagName!=="BUTTON"&&(r.role="button"),r.ariaHasPopup="listbox",r.ariaExpanded="false",r.setAttribute("aria-controls",S.content),r.addEventListener("click",()=>{V()}),O.append(i),i.role="listbox",i.tabIndex=0,i.setAttribute("aria-labelledby",S.trigger),i.ariaOrientation="vertical",a.hasAttribute("data-required")&&(i.ariaRequired="true"),m(i,{position:"absolute","min-width":"var(--st-content-min-w)",left:"var(--st-content-left)",top:"var(--st-content-top)"}),y.role="presentation";for(let e=0;e<l.length;e++){let t=l[e];t.element.role="option",t.element.tabIndex=-1,t.element.ariaSelected=e===b?"true":"false",t.element.dataset.selected=e===b?"true":"false",t.element.querySelectorAll("svg").forEach(o=>{o.ariaHidden="true"}),t.element.addEventListener("click",()=>{D(e)}),t.element.addEventListener("mouseenter",()=>{v(e)}),t.element.addEventListener("mouseleave",()=>{L()})}})()};P(f("[data-st-root]"));
