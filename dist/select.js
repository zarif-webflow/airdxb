import{g as v,a as H,s as f}from"./chunks/util.js";import{a as F,t as N,c as P,o as U,f as z,s as B,b as T}from"./chunks/popper.js";const M=new Set,R=()=>{for(;;){const r=Math.random().toString(36).substring(2,8);if(!M.has(r))return r}},X=r=>{const C=document.createDocumentFragment(),o=v("[data-st-trigger]",r),c=v("[data-st-value]",o),n=v("[data-st-content]",r),L=v("[data-st-viewport]",r);let b=!1,h,w,i,A,k,S;const E=(()=>{const e=`st--${R()}`;let t=r.id;t===""&&(t=e,r.id=t);const a={id:e,content:`${e}--content`,trigger:`${e}--trigger`,viewport:`${e}--viewport`,rootElement:t};return n.id=a.content,o.id=a.trigger,L.id=a.viewport,a})(),l=(()=>{let e=!1;const t=[],a=H("[data-st-option]",r);for(let s=0;s<a.length;s++){const d=a[s],u=d.getAttribute("data-value")??d.textContent?.trim();if(u===void 0)throw new Error("Option element must have a value or a text content!");d.setAttribute("data-value",u),d.setAttribute("id",`${E.id}--option-${s}`);const g=d.hasAttribute("selected")&&!e;t.push({element:d,value:u}),g&&(e=!0,h=s,c.textContent=d.textContent?.trim()||null,c.setAttribute("data-selected",""))}return t})(),y=(()=>{const e=document.createElement("select"),t=r.getAttribute("data-name");t&&(e.name=t);const a=r.getAttribute("data-aria");(a==="inert"||!r.hasAttribute("data-aria"))&&e.setAttribute("inert",""),a==="hidden"&&e.setAttribute("aria-hidden","true"),e.tabIndex=-1,r.hasAttribute("data-required")&&(e.required=!0);const s=document.createDocumentFragment();let d=!1;for(let u=0;u<l.length;u++){const{value:g}=l[u],x=document.createElement("option");x.value=g,x.textContent=g,u===h&&!d&&(x.setAttribute("selected",""),d=!0),s.appendChild(x)}return e.appendChild(s),f(r,{position:"relative"}),f(e,{width:"0px",height:"0px",padding:"0px",margin:"0px",overflow:"hidden",position:"absolute",bottom:"0px",left:"50%",transform:"translateX(-50%)",clip:"rect(0px, 0px, 0px, 0px)","white-space":"nowrap","overflow-wrap":"normal"}),!d&&(e.value=""),r.appendChild(e),e})(),$=()=>{if(i!==void 0){const e=l[i];e.element.classList.remove("focused","hovered"),e.element.removeAttribute("data-focused"),e.element.removeAttribute("data-hovered"),e.element.blur()}i=void 0,n.removeAttribute("aria-activedescendant")},p=(e,t="hover")=>{const a=l[e].element;$(),t==="focus"&&(a.classList.add("focused"),a.setAttribute("data-focused","true"),a.focus()),t==="hover"&&(a.classList.add("hovered"),a.setAttribute("data-hovered","true"));const s=a.getAttribute("id");s!==null&&n.setAttribute("aria-activedescendant",s),i=e},q=()=>{for(const{value:e,element:t}of l){if(c.removeAttribute("data-selected"),e===""){c.textContent=t.textContent,t.dataset.selected="false",t.ariaSelected="false";continue}t.dataset.selected="false",t.ariaSelected="false",t.classList.remove("selected")}y.value=""},D=()=>{P(o,n,{placement:"bottom-start",middleware:[U(),z(),B(),T({apply:({rects:e})=>{f(n,{"min-width":`${e.reference.width}px`})}})]}).then(({x:e,y:t})=>{f(n,{left:`${e}px`,top:`${t}px`})})},m=()=>{b&&(C.appendChild(n),b=!1,o.ariaExpanded="false",k?.(),S?.(),A&&document.removeEventListener("keydown",A))},I=()=>{b||(document.body.appendChild(n),b=!0,o.ariaExpanded="true",w!==void 0&&p(w),D(),k=F(o,n,D),S=N(n,{onPointerDownOutside:m,onInteractOutside:m,onFocusOutside:m,exclude:e=>o.isSameNode(e)||o.contains(e)}),A=e=>{if(e.key==="Enter"||e.key===" "){if(e.preventDefault(),i===void 0)return;O(i),m()}e.key==="ArrowDown"&&(e.preventDefault(),p(i===void 0||i>=l.length-1?0:i+1,"focus")),e.key==="ArrowUp"&&(e.preventDefault(),p(i===void 0||i<=0?l.length-1:i-1,"focus")),e.key==="Escape"&&(e.preventDefault(),m())},document.addEventListener("keydown",A))},O=e=>{const t=l[e].element;q(),w=e,p(e,"hover");const a=t.getAttribute("data-value");if(a===null)throw new Error("Option element must have a value!");a?(y.value=a,c.setAttribute("data-selected","")):(y.removeAttribute("value"),c.removeAttribute("data-selected")),c.textContent=t.textContent?.trim()||null,t.ariaSelected="true",t.dataset.selected="true",t.classList.add("selected"),m()};(()=>{o.setAttribute("type","button"),o.tagName!=="BUTTON"&&(o.role="button"),o.ariaHasPopup="listbox",o.ariaExpanded="false",o.setAttribute("aria-controls",E.content),o.addEventListener("click",()=>{I()}),C.append(n),n.role="listbox",n.tabIndex=0,n.setAttribute("aria-labelledby",E.trigger),n.ariaOrientation="vertical",r.hasAttribute("data-required")&&(n.ariaRequired="true"),f(n,{position:"absolute","min-width":"var(--st-content-min-w)",left:"var(--st-content-left)",top:"var(--st-content-top)"}),L.role="presentation";for(let e=0;e<l.length;e++){const t=l[e];t.element.role="option",t.element.tabIndex=-1,t.element.ariaSelected=e===h?"true":"false",t.element.dataset.selected=e===h?"true":"false",t.element.querySelectorAll("svg").forEach(a=>{a.ariaHidden="true"}),t.element.addEventListener("click",()=>{O(e)}),t.element.addEventListener("mouseenter",()=>{p(e)}),t.element.addEventListener("mouseleave",()=>{$()})}})()};X(v("[data-st-root]"));
